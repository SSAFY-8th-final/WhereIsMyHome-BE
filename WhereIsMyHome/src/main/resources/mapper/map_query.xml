<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycom.myhouse.map.dao.MapDao">

	<select id="mapHouseListDong"  parameterType="string" resultType="com.mycom.myhouse.map.dto.HouseDto">
	  	select 	s.no, s.sale_amount, s.description
			   		i.AptName, i.lat, i.lng
		  from 	housesale s join houseinfo i
		 where 	s.houseinfo_no = i.no
	       and 	i.dong = #{dong} <!-- 동 이름으로 -->	
	</select>
	
	<select id="mapHouseListNo"  parameterType="int" resultType="com.mycom.myhouse.map.dto.HouseDto">
	  	select s.no, s.sale_amount, s.description
			   i.AptName, i.lat, i.lng
		  from housesale s join houseinfo i
		 where s.houseinfo_no = i.no
	       and i.no = #{no}
	</select>
	
	<select id="searchHouseNo" parameterType="int" resultType="com.mycom.myhouse.map.dto.HouseDto">
		select 	no, AptName
		  from 	houseinfo
		 where 	no = #{no}
	</select>
	<select id="houseSearchByName" resultType="com.mycom.myhouse.map.dto.SearchResultDto" parameterType="string">
	    select no, AptName
	      from houseinfo 
	     where AptName like concat('%', #{searchWord}, '%')
	     order by AptName
	     limit 20
	</select>
</mapper>